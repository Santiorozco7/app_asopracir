<div *ngIf="rutasVisible && !routesManagementVisible">
  <div class="header mb">
    <div>
      <svg class="header__icon icon--marginr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
        <path d="M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM504 312V248H440c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V136c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H552v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"/>
      </svg>
      <span><h1 class="title inline">gestión de rutas</h1></span>
    </div>
    <button class="button button--cancel" (click)="cerrarTodo()">Cancelar</button>
  </div>

  <section *ngIf="!routesManagementVisible">
    <div class="header">
      <div>
        <svg class="header__icon icon--marginr " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
          <path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/>
        </svg>
        <span><h2 class="subtitle inline">transportador</h2></span>
      </div>
      <button class="button button--cancel" (click)="openRoutesManagement(1)" *ngIf="(!edit && !managementFlag) || edit">
        <p *ngIf="managementFlag">editar</p>
        <p *ngIf="!managementFlag">seleccionar</p>
      </button>
    </div>
    <div class="form__section">
      <div class="section__item">
        <label for="transporterName">nombre</label>
        <input class="form__input" type="text" id="transporterName" [value]="getTransporterName()" disabled>
      </div>
      <div class="section__item">
        <label for="transporterPlate">placa</label>
        <input class="form__input" type="text" id="transporterPlate" [value]="getTransporterPlate()" disabled>
      </div>
      <div class="section__item">
        <label for="transporterPhone">teléfono/celular</label>
        <input class="form__input" type="text" id="transporterPhone" [value]="getTransporterPhone()" disabled>
      </div>
    </div>

    <div class="header">
      <div>
        <svg class="header__icon icon--marginr " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
          <path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/>
        </svg>
        <span><h2 class="subtitle inline">colaborador</h2></span>
      </div>
      <button class="button button--cancel" (click)="openRoutesManagement(2)" *ngIf="(!edit && !managementFlag) || edit">
        <p *ngIf="managementFlag">editar</p>
        <p *ngIf="!managementFlag">seleccionar</p>
      </button>
    </div>
    <div class="form__section">
      <div class="section__item">
        <label for="collabName">nombre</label>
        <input class="form__input" type="text" id="collabName" [value]="getCollabName()" disabled>
      </div>
      <div class="section__item">
        <label for="collabPhone">teléfono/celular</label>
        <input class="form__input" type="text" id="collabPhone" [value]="getCollabPhone()" disabled>
      </div>
    </div>

    <div class="header">
      <div>
        <svg class="header__icon icon--marginr " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
          <path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/>
        </svg>
        <span><h2 class="subtitle inline">Fecha de ruta</h2></span>
      </div>
    </div>
    <div class="form__section">
      <div class="section__item">
        <label for="pickupDate">Fecha</label>
        <input class="form__input" type="date" id="pickupDate" [(ngModel)]="pickupDate" (ngModelChange)="onSubmit()" [value]="getPickupDate()" [disabled]="!edit">
      </div>
    </div>
    
    <div class="header" *ngIf="managementFlag">
      <div>
        <svg class="header__icon icon--marginr " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
          <path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/>
        </svg>
        <span><h2 class="subtitle inline">ordenes</h2></span>
      </div>
      <button class="button button--cancel" (click)="openRoutesManagement(3)" *ngIf="(!edit && !managementFlag) || edit">
        <p>agregar</p>
      </button>
    </div>
    <div class="form__section notbp" *ngIf="managementFlag">
      <table class="table">
        <thead>
            <tr>
                <th>Fecha Orden</th>
                <th>Finca</th>
                <th>Vereda</th>
                <th>Nombre</th>
                <th>Tel.</th>
                <th>No. Racimos</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let route of routesData?.orders">
                <td>{{ route.startDate }}</td>
                <td>{{ route.farmName }}</td>
                <td>{{ route.zoneName }}</td>
                <td>{{ route.name }}</td>
                <td>{{ route.phoneNumber }}</td>
                <td>{{ route.numBunches }}</td>
                <td class="col__icon" *ngIf="edit">
                    <a class="col__link" href="javascript:void(0);" (click)="removeOrderFromRoute(route.orderID)">
                      <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                        <path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/>
                      </svg>
                    </a>
                </td>
            </tr>
        </tbody>
      </table>
    </div>

    <button class="button button--success" (click)="createRoute()" *ngIf="!managementFlag && collabotor && transporter && pickupDate">
      Crear Ruta
    </button>
  </section>
</div>

<app-routes-management [routesManagementVisible]="routesManagementVisible" [managementFlag]="managementFlag" [actionFilter]="actionFilter" [routeID]="routeID" (transporter)="obtenerTransportador($event)" (collabotor)="obtenerColaborador($event)" (cerrarModal)="closeRoutesManagement()"></app-routes-management>
<app-confirmation-modal *ngIf="showConfirmationModal"
  [title]="'Crear Ruta'"
  [description]="'¿Está seguro de crear esta ruta?'"
  (confirm)="createRouteConfirmed()"
  (cancel)="showConfirmationModal = false">
</app-confirmation-modal>
<app-notification *ngIf="showDialog" 
  [message]="message" 
  [positiveNotification]="positiveNotification" 
  (closeNotification)="closeNotification()">
</app-notification>